# Config File by Zhan, Lei, Charitha, Xue
# Notes: please leave no "space" at the end of each row since it may 
# cause the true being identified as false, i.e., "[feature A] = true  "
# might be treated as "[feature A] = false" in the simulation.

#-----------------------------#
#Input Files
#-----------------------------#
## Road Network
ROADS_SHAPEFILE = data/NYC/facility/road/road_fileNYC.shp
LANES_SHAPEFILE = data/NYC/facility/road/lane_fileNYC.shp
ZONES_SHAPEFILE = data/NYC/facility/zone_centroid.shp
CHARGER_SHAPEFILE = data/NYC/facility/charging_station/NYC_zone_wgs84_charger_loc.shp
CHARGER_CSV = data/NYC/facility/charging_station/L_0_120000.csv
ROADS_CSV = data/NYC/facility/road/road_fileNYC.csv
LANES_CSV = data/NYC/facility/road/lane_fileNYC.csv
ZONE_CSV = data/NYC/facility/zone_fileNYC_capacity.csv
NUM_OF_ZONE = 258

## Background Traffic
BT_EVENT_FILE = data/NYC/operation/speed/scenario2/speed_2019-04-25.csv
BT_STD_FILE = data/NYC/operation/speed/scenario2/speed_std_2019-04-25.csv
HOUR_OF_SPEED = 30

## Travel demand
DM_EVENT_FILE = data/NYC/demand/request/scenario2/demand_2019-04-25.json
DM_WAITING_TIME = data/NYC/demand/wait/scenario2/demand_2019-04-25.csv
DM_SHARE_PERCENTAGE = data/NYC/demand/share/scenario2/demand_2019-04-25.json
DEMAND_SHARABLE = false
### If DEMAND_DIFFUSION is true, then the origin/destination (except in the hub) 
### will be uniformly distributed in a zone; if it is false, the origin/destination
### will be the centroids of the corresponding zones.
DEMAND_DIFFUSION = true
DEMAND_FACTOR = 1.0
HOUR_OF_DEMAND = 30

## Default bus schedule
BUS_SCHEDULE = data/NYC/operation/bus_planning/blank.json

## Number of vehicles
NUM_OF_EV = 4000
NUM_OF_BUS = 50

## Battery Capacity
EV_BATTERY = 50
BUS_BATTERY = 250

## Event File, specify event like road closure or traffic regulation
EVENT_FILE = data/NYC/operation/event/empty.csv
### Check event for every 10 ticks
EVENT_CHECK_FREQUENCY = 10

#-----------------------------#
# Operation Options
#-----------------------------#
K_SHORTEST_PATH = false
COLLABORATIVE_EV = false
BUS_PLANNING = false
PROACTIVE_RELOCATION = true
### 10 minutes, after this amount of time vehicle will try to park to the closest zone
MAX_CRUISING_TIME = 10

## Ecorouting Parameters
ECO_ROUTING_EV = false
ECO_ROUTING_BUS = false
NUM_CANDIDATE_ROUTES = 20

## Vehicle charging
PROACTIVE_CHARGING = false
RECHARGE_LEVEL_LOW = 0.2
RECHARGE_LEVEL_HIGH = 0.8
BUS_RECHARGE_LEVEL_LOW = 0.5
BUS_RECHARGE_LEVEL_HIGH = 0.8

## 3 minutes, 600 ticks, after this amount of time we force the vehicle to move to the next available link
MAX_STUCK_TIME = 3

#-----------------------------#
# Simulation setup 
#-----------------------------#
## Second per step, here is 0.3s/tick, so 12000 ticks = 1 hour, 200 ticks = 1 min
RANDOM_SEED = 42
SIMULATION_STEP_SIZE = 0.3
### The rest interval/time variables are in the unit of tick
SIMULATION_ZONE_REFRESH_INTERVAL = 200
SIMULATION_SPEED_REFRESH_INTERVAL = 12000
SIMULATION_DEMAND_REFRESH_INTERVAL = 12000
SIMULATION_BUS_REFRESH_INTERVAL = 24000
SIMULATION_CHARGING_STATION_REFRESH_INTERVAL = 100
SIMULATION_INTERVAL_SIZE = 100
SIMULATION_STOP_TIME = 360000

#-----------------------------#
# Network Partitioning
#-----------------------------#
MULTI_THREADING = true
## Number of Partitions: 1 not allowed, only number of partition=2^k can produce correct partitions
N_PARTITION = 8
N_THREADS = 8
SIMULATION_NETWORK_REFRESH_INTERVAL = 1000
SIMULATION_PARTITION_REFRESH_INTERVAL = 20000
SIMULATION_MAX_PARTITION_REFRESH_INTERVAL = 100000
THRESHOLD_VEHICLE_NUMBER = 200

#-----------------------------#
# Data collection
#-----------------------------#
## Parameters for data collection buffer
ENABLE_DATA_COLLECTION = true
DEBUG_DATA_BUFFER = false
DATA_CLEANUP_REFRESH = 30000

## Parameters for JSON output file writer
ENABLE_JSON_WRITE = false
JSON_DEFAULT_FILENAME = EOut
JSON_DEFAULT_EXTENSION = json
JSON_DEFAULT_PATH = sim_output
### This value should always be greater than FREQ_RECORD_VEH_SNAPSHOT
JSON_TICKS_BETWEEN_TWO_RECORDS = 20
JSON_FREQ_RECORD_LINK_SNAPSHOT = 1000
JSON_BUFFER_REFRESH = 200
JSON_TICK_LIMIT_PER_FILE = 2

## Parameters for aggregated report writer
AGG_DEFAULT_PATH = agg_output

## Parameters for handling network connections
ENABLE_NETWORK = true
DEBUG_NETWORK = true
NETWORK_BUFFER_REFRESH = 2500
NETWORK_STATUS_REFRESH = 5000
NETWORK_LISTEN_PORT = 61279
NETWORK_MAX_MESSAGE_SIZE = 1000000000

## Parameter for recording vehicle snapshot
FREQ_RECORD_VEH_SNAPSHOT = 20

## Parameters for display metrics
ENABLE_METRICS_DISPLAY = true
METRICS_DISPLAY_INTERVAL = 600

#-----------------------------#
# Constants
#-----------------------------#
## Parameters for primitive move
TRAVEL_PER_TURN = 3

## Searching scope for nearby links and charging stations. unit: degree, default: ~5km
SEARCHING_BUFFER = 0.05
## Minimum cruising scope for nearby links and charging stations. unit: meter, default: 0.5km
CRUISING_BUFFER = 500

## Car following status
STATUS_REGIME_FREEFLOWING = 0
STATUS_REGIME_CARFOLLOWING = 128
STATUS_REGIME_EMERGENCY =256

## Car following model constants
ALPHA_DEC = 1.55
BETA_DEC = 1.08
GAMMA_DEC = 1.65
ALPHA_ACC = 2.15
BETA_ACC = -1.67
GAMMA_ACC = -0.89

## For K_SHORTEST_PATH 
K_VALUE = 3
THETA_LOGIT = 0.25

## Parameters for the adaptive network weighting
PART_ALPHA = 15
PART_BETA = 5
PART_GAMMA = 10

## Number of future road segments to be considered in counting shadow vehicles
N_SHADOW = 10

## For microscopic vehicle movement
DEFAULT_VEHICLE_WIDTH = 1.8
DEFAULT_VEHICLE_LENGTH = 5.5
NO_LANECHANGING_LENGTH = 30
MIN_UTURN_LENGTH = 100
LANE_WIDTH = 3.5
FREE_SPEED=13.4112f
H_UPPER = 1.36
H_LOWER = 0.5
FLT_INF = Float.MAX_VALUE
FLT_EPSILON = 1.0 / FLT_INF

## For lane changing
LANE_CHANGING_PROB_PART1 = 0.5
LANE_CHANGING_PROB_PART2 = 0.5

## Mode split
### unit: dollars, per mile, per minute
BUS_TICKET_PRICE = 15.0f
MS_ALPHA = -0.078725f
MS_BETA = -0.020532f
BASE_PRICE_TAXI = 2.0f
INITIAL_PRICE_TAXI = 2.5f
TAXI_BASE = -0.672839f
BUS_BASE = -1.479586f

